"use client"
import { menuItems } from '@/lib/res/const'
import { LogOut, User } from 'lucide-react'
import { signOut, useSession } from 'next-auth/react'
import Link from 'next/link'
import { usePathname } from 'next/navigation'
import React from 'react'

const SidebarApp = () => {
  const pathName = usePathname()
  const auth = useSession();

  const isMenuActive = (menu: {name: string, path: string, icon: JSX.Element}) => {
    return pathName === menu.path;
  };

  const isLoginOrMenuPage = pathName === "/login" || pathName === "/"
  return (
    <div className={`${isLoginOrMenuPage ? "hidden": "md:flex"} hidden md:flex-col w-64 min-w-64 h-screenDevice bg-default-100`}>
        <div className={`flex-1 py-3 px-app`}>
            <div className='flex gap-2'>
                <div className='w-[46.86px] h-8 rounded-lg'>
                    <svg width="48" height="32" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.6747 28.7229C16.3744 28.7229 19.3735 25.7237 19.3735 22.0241C19.3735 18.3245 16.3744 15.3253 12.6747 15.3253C8.9751 15.3253 5.97595 18.3245 5.97595 22.0241C5.97595 25.7237 8.9751 28.7229 12.6747 28.7229Z" fill="white"/>
                        <path d="M26.3133 24.7711C31.5301 24.7711 35.7591 20.5421 35.7591 15.3253C35.7591 10.1085 31.5301 5.87952 26.3133 5.87952C21.0966 5.87952 16.8676 10.1085 16.8676 15.3253C16.8676 20.5421 21.0966 24.7711 26.3133 24.7711Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M13.2664 19.3918C12.8983 19.348 12.532 19.3825 12.1778 19.4972C10.8376 19.9307 10.1004 21.3731 10.5337 22.7157C10.8376 23.6583 11.6745 24.3464 12.6606 24.4648C13.0287 24.5077 13.395 24.4694 13.7492 24.3576C15.0885 23.9221 15.8257 22.4807 15.3951 21.14C15.0894 20.1965 14.2506 19.5103 13.2664 19.3918Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M27.3925 16.2111L24.9596 17.9395C24.8321 18.0307 24.727 17.9758 24.727 17.8185V14.2734C24.727 14.1152 24.8321 14.0593 24.9596 14.1515L27.3925 15.8807C27.52 15.971 27.52 16.1199 27.3925 16.2111ZM27.2827 12.0285C26.7031 11.8116 26.09 11.7241 25.4675 11.7716C23.1118 11.9438 21.3357 14.0044 21.5051 16.3638C21.6297 18.0251 22.7164 19.4817 24.2794 20.0653C24.8563 20.2831 25.4713 20.3724 26.0955 20.325C28.455 20.15 30.232 18.0912 30.0608 15.7328C29.938 14.0695 28.8457 12.6148 27.2827 12.0285Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M33.505 17.1115L32.5544 17.182C32.4358 17.8454 32.2217 18.4763 31.9262 19.0664L32.6517 19.6936C33.1038 20.0814 33.1538 20.7652 32.7647 21.218L31.9743 22.1346C31.7853 22.3518 31.524 22.4863 31.2377 22.5076C30.9477 22.5299 30.6707 22.4353 30.452 22.2469L29.7312 21.6197C29.1919 21.9992 28.5971 22.3017 27.9568 22.515L28.0263 23.467C28.0699 24.0608 27.6223 24.5813 27.0293 24.6249L25.823 24.7149C25.2281 24.7585 24.7093 24.3094 24.6666 23.7147L24.5971 22.7637C23.9337 22.6459 23.3018 22.4334 22.7125 22.1365L22.0871 22.863C21.8981 23.081 21.634 23.2146 21.3468 23.235C21.0605 23.2545 20.7807 23.1617 20.5629 22.9715L19.6447 22.1838C19.4288 21.9955 19.2954 21.7311 19.275 21.4444C19.2537 21.154 19.3445 20.8756 19.5326 20.6576L20.159 19.9348C19.7828 19.3948 19.4789 18.8001 19.2676 18.1571L18.3161 18.2295C17.7212 18.2731 17.2014 17.8231 17.1607 17.2275L17.0726 16.0223C17.03 15.4285 17.4757 14.908 18.0696 14.8644L19.0202 14.7939C19.1398 14.1286 19.351 13.494 19.6447 12.9095L18.922 12.2814C18.7052 12.0949 18.5746 11.8304 18.5523 11.5428C18.531 11.2543 18.6237 10.975 18.8127 10.7579L19.6012 9.83937C19.9792 9.40238 20.6899 9.35042 21.1244 9.72989L21.8453 10.3534C22.3864 9.97669 22.9785 9.67515 23.6206 9.45897L23.5511 8.50797C23.5075 7.91232 23.9532 7.39368 24.548 7.35007L25.7479 7.26286C26.3418 7.22018 26.8607 7.66553 26.9043 8.26118L26.9738 9.21403C27.6372 9.33279 28.27 9.5434 28.8574 9.83937L29.4838 9.1129C29.8581 8.67498 30.5688 8.62488 31.0061 8.99971L31.9215 9.79391C32.3718 10.1864 32.4209 10.8674 32.0318 11.3202L31.4082 12.042C31.7853 12.5838 32.0883 13.1776 32.2996 13.8187L33.2548 13.7482C33.8478 13.7028 34.3676 14.1527 34.4121 14.7484L34.5011 15.9536C34.5446 16.5465 34.098 17.0679 33.505 17.1115ZM17.4757 22.9335C17.7926 23.0949 17.9176 23.4865 17.7546 23.8001L17.4284 24.4421C17.3524 24.5943 17.2181 24.7093 17.0541 24.7603C16.892 24.8151 16.7205 24.8012 16.5667 24.7204L16.0608 24.4634C15.8005 24.7566 15.5021 25.0146 15.1612 25.2298L15.3363 25.7698C15.4456 26.1066 15.2566 26.4694 14.9212 26.5798L14.2374 26.7997C13.9029 26.9091 13.5388 26.7236 13.4285 26.384L13.2552 25.8459C12.8568 25.8709 12.4612 25.8366 12.0813 25.7503L11.8219 26.2541C11.7459 26.4081 11.6115 26.5222 11.4503 26.5733C11.2863 26.6289 11.1131 26.6141 10.9602 26.5352L10.3181 26.2068C10.1661 26.1288 10.0522 25.9943 10.0021 25.831C9.9456 25.6687 9.9595 25.4942 10.0401 25.3384L10.2986 24.8355C10.004 24.5757 9.74639 24.2742 9.53143 23.9346L8.99218 24.1081C8.65769 24.2213 8.29356 24.0348 8.18608 23.6961L7.96463 23.0133C7.8553 22.6756 8.04154 22.3128 8.37787 22.2014L8.91898 22.0289C8.89211 21.6308 8.92361 21.2337 9.01256 20.8533L8.50759 20.5945C8.35656 20.5184 8.2426 20.3857 8.19071 20.2215C8.13512 20.0564 8.15087 19.8838 8.22963 19.7298L8.5567 19.0905C8.71329 18.7825 9.11726 18.6498 9.4221 18.8094L9.92707 19.0683C10.1846 18.7714 10.4858 18.5125 10.824 18.2972L10.6516 17.7582C10.5432 17.4233 10.7295 17.0568 11.0658 16.9501L11.7477 16.7293C12.0869 16.6188 12.4482 16.8044 12.5575 17.1421L12.7299 17.6821C13.1302 17.6571 13.5267 17.6914 13.9048 17.7786L14.1633 17.2729C14.3189 16.9658 14.7183 16.8378 15.025 16.9918L15.668 17.3203C15.9839 17.4817 16.109 17.8695 15.9469 18.1878L15.6884 18.6916C15.9812 18.9513 16.2406 19.251 16.4537 19.5934L16.9929 19.419C17.3311 19.3095 17.6916 19.496 17.8037 19.8337L18.0159 20.5166C18.1243 20.8515 17.939 21.2161 17.6017 21.3265L17.0634 21.5C17.0884 21.899 17.0569 22.2914 16.9679 22.6765L17.4757 22.9335ZM45.6021 17.6116C44.3558 16.2765 42.7362 15.3886 40.9721 15.0546C40.8665 13.224 40.4551 11.45 39.7407 9.76422C38.9374 7.85944 37.7866 6.15042 36.3217 4.68263C34.8559 3.21577 33.1474 2.06344 31.247 1.2581C29.2781 0.422151 27.185 0 25.0326 0C21.9528 0 18.9646 0.880487 16.3898 2.5459C14.0678 4.04523 12.1795 6.1096 10.8999 8.54509C8.05451 8.739 5.4055 9.95349 3.38376 12.0012C1.20081 14.2093 0 17.1384 0 20.2456C0 23.3686 1.21286 26.3098 3.41434 28.5226C5.41476 30.5341 8.01559 31.7309 10.8166 31.9406L10.8295 32H40.0919L40.1002 31.9453C42.1053 31.781 43.9667 30.9182 45.4056 29.4773C47.0132 27.8638 47.9036 25.7188 47.9036 23.4391C47.8981 21.2681 47.0836 19.2009 45.6021 17.6116Z" fill="black"/>
                    </svg>
                </div>
                <div className='text-2xl font-bold font-sans'>
                    be-engineer
                </div>
            </div>
            <div className={`mt-app space-y-2 font-sans`}>
                {menuItems.map((item, index) => (
                    <div key={`${item}-${index}`}>
                        <Link href={`${item.path}`}>
                            <div
                              className={`flex gap-2 items-center rounded-lg w-max p-1 ${
                                  isMenuActive(item)
                                  ? "text-default-foreground bg-default-50 shadow-neutral-sm-app font-semibold"
                                  : "text-default-600"
                              }`}
                              >
                              {item.icon}
                              <div className="text-lg">{item.name}</div>
                            </div>
                        </Link>
                    </div>
                ))}
            </div>
        </div>
        <div className='flex px-app py-2'>
            <div className='flex-1 flex gap-1 items-center'>
                <div className={`w-8 h-8 rounded-full bg-gray-300 flex justify-center items-center`}>
                    <User size={24} fill='#000' />
                </div>
                <div className={`font-semibold text-default-600 text-lg font-sans`}>
                    {auth.data?.user.username}
                </div>
            </div>
            <div onClick={() => signOut()} className={`p-1 cursor-pointer`}>
                <LogOut size={24} />
            </div>
        </div>
    </div>
  )
}

export default SidebarApp